Cheatsheet mininet : https://github.com/surfer2047/cheatsheet/blob/master/mininet_cheatsheet.md


https://github.com/netgroup-polito/ebpf-test
https://github.com/matthewbentley/ebpf-flowradar/blob/master/

1) Ouvrir un terminal pour mininet

sudo mn --topo tree,1,2 

(s1,h1 sur eth1) (s1,h2, eth2)

2) pingall pour tester et faire evoluer le programe xdp_stats

3) (Pas oublier >exit >sudo mn -c when done with the whole simulation)


bonus:
h1 python -m SimpleHTTPServer 999 & 

h2 wget 10.0.0.1:999 -O data (a modif) (h2 request page from webserver h1)


-----


Ouvrir un terminal 
basic04-pinningmaps

> make
> sudo mount -t bpf bpf /sys/fs/bpf/
The mechanism used for sharing BPF maps between programs is called pinning. What this means is that we create a file for each map under a special file system mounted at /sys/fs/bpf/. If this file system is not mounted, our attempts to pin BPF objects will fail, so we need to make sure it is mounted.


> sudo ./xdp_loader --dev s1-eth1 --force
> sudo ./xdp_stats --dev s1-eth1

Print info de l'interface s1-eth1 là où est loadé le programm XDP qui incrément le nombre de packets et de bytes 


Normalement program est sur l'interface eth1 mais dans quel sens ?
A vérifier avec quelques expérimentations 
Idéalement de h1 vers s1 

> sudo cat /sys/kernel/debug/tracing/trace_pipe

is used to see the different bpf_printk() used to debug 

----

Si nécessaire , un terminale avec wireshark

> sudo wireshark 

pour voir les interfaces leurs noms etc.. 


NB: check les labos packet parsing pour filter le sens des packets echanger
sur une meme interface j'imagine




----


Questions:
Est-ce que l'interface testing disparait de > s1 ifconfig dans mininet lorsque l'on reboot l'ordi ou testenv fait des trucs tout seul 
